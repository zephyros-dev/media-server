FROM docker.io/caddy:2.10.2-builder-alpine@sha256:556058bf580e6323f34adae8e59c09647b4f08e14e2a35b71936c9105e6d8305 AS builder
RUN --mount=type=cache,target=/go/pkg,sharing=locked \
    xcaddy build \
    --with github.com/caddy-dns/porkbun

FROM docker.io/caddy:2.10.2-alpine@sha256:7d75b1294f73048155757377c38f05621a65c8df4f261077aa3091c9168ea53a
COPY --from=builder /usr/bin/caddy /usr/bin/caddy
